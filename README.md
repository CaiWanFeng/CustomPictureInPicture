[English Document](README_en.md)


基于 iOS 14 的 `AVPictureInPictureController`，完全自定义画中画，已覆盖市面上所有画中画的核心和难点。


**全部开源！！！**

**iOS Android Flutter 所有源码 ！！！**



**demo展示：**

![demo](demo.gif)


**运行环境：**

真机 & iOS14或以上

---


> **此仓库花费了我大量的时间和精力，若对你有用，请 star 支持！⭐️ 后续会更新更多功能！**


---


## 难点和思路：

*因为 Android 的自定义画中画无任何难度，所以此处只讨论 iOS 的自定义画中画。*

### 1. 如何添加自定义 view 到画中画窗口？

你如果在画中画弹出前后将所有 window 打印出来，你就会发现，当画中画弹出后，多了一个 window，而这个 window 就是你添加自定义 view 的 window。

### 2. 如何隐藏系统的快进快退按钮、播放按钮、进度条？

`AVPictureInPictureController` 提供的接口就那几个，你尝试了所有接口都实现不了。这个时候就可以断定，这个功能是通过私有 api 来实现的了。

### 3. 如何用代码动态修改窗口的形状？

窗口的形状由视频的形状决定。

### 4. 如何用代码旋转窗口？



### 5. 如何在录视频时不暗屏？
### 6. 如何让画中画在后台一直运行？

播放无声音频。

### 7. 如何应对苹果的审核？


苹果可能会因为你使用了后台权限而拒绝你，这个时候你可以在APP里添加一个系统播放器，就播放画中画的使用教程，有了系统播放器，你就可以理所当然的使用画中画了。

或者用一个web，web里的播放器也会调用系统播放器。

